<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéµ Music Search + Play</title>
  <style>
    :root { --bg: #121212; --card-bg: #181818; --card-hover: #282828; --text: #ffffff; --text-muted: #b3b3b3; --brand: #1db954; --brand-hover: #1ed760; --sidebar: #000000; --player-bg: #181818; --progress-bar: #535353; --progress-active: #b3b3b3; } * { box-sizing: border-box; margin: 0; padding: 0; } body { font-family: 'Circular', -apple-system, BlinkMacSystemFont, system-ui, sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: grid; grid-template-columns: 240px 1fr; grid-template-rows: 1fr auto; grid-template-areas: "sidebar main" "player player"; } /* Sidebar */ .sidebar { grid-area: sidebar; background: var(--sidebar); padding: 24px; display: flex; flex-direction: column; gap: 24px; } .logo { font-size: 24px; font-weight: 700; margin-bottom: 16px; } .nav-item { color: var(--text-muted); text-decoration: none; font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 12px; padding: 8px 0; transition: color 0.2s ease; } .nav-item:hover { color: var(--text); } /* Main Content */ .main { grid-area: main; padding: 24px; overflow-y: auto; } .searchbar { margin-bottom: 24px; position: relative; } .search-input { width: 100%; padding: 12px 16px; border-radius: 500px; border: none; background: rgba(255, 255, 255, 0.1); color: var(--text); font-size: 14px; outline: none; } .search-input::placeholder { color: rgba(255, 255, 255, 0.7); } .search-input:focus { background: rgba(255, 255, 255, 0.2); } .section-title { font-size: 24px; margin: 24px 0 16px; } .results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 24px; } .card { background: var(--card-bg); border-radius: 8px; padding: 16px; transition: background-color 0.3s ease; cursor: pointer; position: relative; } .card:hover { background: var(--card-hover); } .card-play { position: absolute; bottom: 16px; right: 16px; width: 40px; height: 40px; background: var(--brand); border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0; transition: all 0.3s ease; transform: translateY(8px); box-shadow: 0 8px 8px rgba(0, 0, 0, 0.3); } .card:hover .card-play { opacity: 1; transform: translateY(0); } .card-play:hover { background: var(--brand-hover); transform: scale(1.05); } .card-img { width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 4px; margin-bottom: 16px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5); } .card-title { font-weight: 700; margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } .card-subtitle { font-size: 14px; color: var(--text-muted); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; } /* Player */ .player { grid-area: player; background: var(--player-bg); border-top: 1px solid rgba(255, 255, 255, 0.1); padding: 16px; display: grid; grid-template-columns: 1fr 2fr 1fr; align-items: center; gap: 16px; } .player-track { display: flex; align-items: center; gap: 12px; min-width: 180px; } .player-track-img { width: 56px; height: 56px; object-fit: cover; } .player-track-info { display: flex; flex-direction: column; } .player-track-title { font-size: 14px; font-weight: 600; } .player-track-artist { font-size: 12px; color: var(--text-muted); } .player-controls { display: flex; flex-direction: column; align-items: center; gap: 8px; } .player-buttons { display: flex; align-items: center; gap: 16px; } .player-button { background: none; border: none; color: var(--text); font-size: 16px; cursor: pointer; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; } .player-button:hover { color: var(--brand); } .player-button.active { color: var(--brand); } .player-button-play { background: var(--text); color: #000; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; } .player-button-play:hover { transform: scale(1.05); background: var(--brand); } .player-progress { width: 100%; display: flex; align-items: center; gap: 8px; } .player-time { font-size: 11px; color: var(--text-muted); min-width: 40px; } .player-bar { flex-grow: 1; height: 4px; background: var(--progress-bar); border-radius: 2px; position: relative; cursor: pointer; } .player-progress-bar { position: absolute; left: 0; top: 0; height: 100%; background: var(--progress-active); border-radius: 2px; width: 0%; } .player-progress-handle { position: absolute; width: 12px; height: 12px; background: var(--text); border-radius: 50%; top: 50%; transform: translate(-50%, -50%); opacity: 0; transition: opacity 0.2s ease; pointer-events: none; } .player-bar:hover .player-progress-handle { opacity: 1; } .player-actions { display: flex; justify-content: flex-end; align-items: center; gap: 12px; } /* Status */ .status { color: var(--text-muted); font-size: 14px; margin: 16px 0; } /* Hidden YouTube player */ #yt-frame { position: absolute; width: 0; height: 0; opacity: 0; } /* Responsive */ @media (max-width: 768px) { body { grid-template-columns: 1fr; grid-template-areas: "main" "player"; } .sidebar { display: none; } .results-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); } .player { grid-template-columns: 1fr; text-align: center; } .player-track { justify-content: center; } .player-actions { display: none; } }
    .fav-btn, .playlist-btn {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      margin-top: 8px;
      font-size: 14px;
      transition: color 0.2s;
    }
    .fav-btn.active {
      color: var(--brand);
    }
    .fav-btn:hover, .playlist-btn:hover {
      color: var(--text);
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="logo">Musicify</div>
    <a href="#" class="nav-item" onclick="showHome()">üè† Home</a>
    <a href="#" class="nav-item" onclick="showFavorites()">‚ù§Ô∏è Favorites</a>
    <a href="#" class="nav-item" onclick="showHistory()">‚è±Ô∏è History</a>
    <a href="#" class="nav-item" onclick="showPlaylists()">üé∂ Playlists</a>
  </div>

  <div class="main">
    <div class="searchbar">
      <input type="text" class="search-input" placeholder="What do you want to listen to?" id="query" autocomplete="off">
    </div>
    
    <div id="status" class="status"></div>
    
    <h2 class="section-title" id="section-title">Search Results</h2>
    <div id="results" class="results-grid"></div>
  </div>

  <div class="player" id="player" style="display: none;"> <div class="player-track"> <img class="player-track-img" id="player-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="> <div class="player-track-info"> <div class="player-track-title" id="player-title">Not Playing</div> <div class="player-track-artist" id="player-artist">Search for music</div> </div> </div> <div class="player-controls"> <div class="player-buttons"> <button class="player-button" id="prev-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M13 2.5L5 7.119V3H3v10h2V8.881l8 4.619z"></path></svg> </button> <button class="player-button" id="shuffle-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.5 6.8l.7-.8C4.1 4.7 2.5 4 .9 4v1c1.3 0 2.6.6 3.5 1.6l.1.2zm7.5 4.7c-1.2 0-2.3-.5-3.2-1.3l-.6.8c1 1 2.4 1.5 3.8 1.5V14l3.5-2-3.5-2v1.5zm0-6V7l3.5-2L12 3v1.5c-1.6 0-3.2.7-4.2 2l-3.4 3.9c-.9 1-2.2 1.6-3.5 1.6v1c1.6 0 3.2-.7 4.2-2l3.4-3.9c.9-1 2.2-1.6 3.5-1.6z"></path></svg> </button> <button class="player-button player-button-play" id="play-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg> </button> <button class="player-button" id="next-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M12.7 1a.7.7 0 0 0-.7.7v5.15L2.05 1.107A.7.7 0 0 0 1 1.712v12.575a.7.7 0 0 0 1.05.607L12 9.149V14.3a.7.7 0 0 0 .7.7h1.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-1.6z"></path></svg> </button> <button class="player-button" id="repeat-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5H10v1.5l3.5-2-3.5-2V4H5.5C3 4 1 6 1 8.5c0 .6.1 1.2.4 1.8l.9-.5C2.1 9.4 2 9 2 8.5 2 6.6 3.6 5 5.5 5zm9.1 1.7l-.9.5c.2.4.3.8.3 1.3 0 1.9-1.6 3.5-3.5 3.5H6v-1.5l-3.5 2 3.5 2V13h4.5C13 13 15 11 15 8.5c0-.6-.1-1.2-.4-1.8z"></path></svg> </button> </div> <div class="player-progress"> <span class="player-time" id="current-time">0:00</span> <div class="player-bar" id="progress-bar"> <div class="player-progress-bar" id="progress"></div> <div class="player-progress-handle" id="progress-handle"></div> </div> <span class="player-time" id="duration">0:00</span> </div> </div> <div class="player-actions"> <button class="player-button" id="volume-btn"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M15 8.5c0-1.3-1-2.4-2.2-2.7v1.5c.4.2.7.6.7 1.2 0 .6-.3 1-.7 1.2v1.5c1.2-.3 2.2-1.4 2.2-2.7zm-3.5-4.3v1.5c1.9.6 3.3 2.4 3.3 4.5s-1.4 3.9-3.3 4.5v1.5c2.5-.7 4.3-3 4.3-6s-1.8-5.3-4.3-6zM4.5 8H1c-.6 0-1-.4-1-1s.4-1 1-1h3.5l4-4v14l-4-4z"></path></svg> </button> </div> </div> <!-- Hidden YouTube player --> <iframe id="yt-frame" title="YouTube player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="display: none;"></iframe>

 

  <script>
    const YOUTUBE_API_KEY = "AIzaSyBcGIEyPh4g7TN2gV4CN_KAcO4SpjGJCFA";

    // --- NEW: Storage ---
    const STORAGE_KEY = "musicifyData";
    let musicifyData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
      history: [],
      favorites: [],
      playlists: {}
    };

    function saveData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(musicifyData));
    }

    const queryInput = document.getElementById('query'); const statusBox = document.getElementById('status'); const resultsEl = document.getElementById('results'); const playerEl = document.getElementById('player'); const playerImg = document.getElementById('player-img'); const playerTitle = document.getElementById('player-title'); const playerArtist = document.getElementById('player-artist'); const playBtn = document.getElementById('play-btn'); const prevBtn = document.getElementById('prev-btn'); const nextBtn = document.getElementById('next-btn'); const shuffleBtn = document.getElementById('shuffle-btn'); const repeatBtn = document.getElementById('repeat-btn'); const volumeBtn = document.getElementById('volume-btn'); const currentTimeEl = document.getElementById('current-time'); const durationEl = document.getElementById('duration'); const progressBar = document.getElementById('progress-bar'); const progress = document.getElementById('progress'); const progressHandle = document.getElementById('progress-handle');
    const queryInput = document.getElementById('query');
    const statusBox = document.getElementById('status');
    const resultsEl = document.getElementById('results');
    const sectionTitle = document.getElementById('section-title');

    // ... (keep rest of your player variables)
    let player; let currentTrack = null; let isPlaying = false; let isShuffled = false; let isRepeated = false; let updateInterval; let searchResults = []; let currentTrackIndex = -1;

    // --- NEW: Render Results with Fav & Playlist buttons ---
    function renderResults(items) {
      resultsEl.innerHTML = '';
      items.forEach((rec, index) => {
        const card = document.createElement('div');
        card.className = 'card';

        const img = document.createElement('img');
        img.className = 'card-img';
        const releaseId = rec.releases?.[0]?.id;
        img.src = releaseId ? `https://coverartarchive.org/release/${releaseId}/front-250` : placeholder();

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = rec.title || 'Untitled';

        const subtitle = document.createElement('div');
        subtitle.className = 'card-subtitle';
        const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown artist';
        subtitle.textContent = artists;

        const playBtn = document.createElement('div');
        playBtn.className = 'card-play';
        playBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg>';
        playBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          playTrack(index, items);
        });

        // --- NEW: Favorites Button ---
        const favBtn = document.createElement('button');
        favBtn.className = 'fav-btn';
        favBtn.textContent = '‚ù§Ô∏è';
        if (musicifyData.favorites.find(t => t.id === rec.id)) favBtn.classList.add('active');
        favBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          toggleFavorite(rec);
          favBtn.classList.toggle('active');
        });

        // --- NEW: Playlist Button ---
        const plBtn = document.createElement('button');
        plBtn.className = 'playlist-btn';
        plBtn.textContent = '‚ûï Playlist';
        plBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          addToPlaylist(rec);
        });

        card.appendChild(img);
        card.appendChild(title);
        card.appendChild(subtitle);
        card.appendChild(playBtn);
        card.appendChild(favBtn);
        card.appendChild(plBtn);
        card.addEventListener('click', () => playTrack(index, items));

        resultsEl.appendChild(card);
      });
    }

    // --- NEW: Toggle Favorite ---
    function toggleFavorite(rec) {
      const exists = musicifyData.favorites.find(t => t.id === rec.id);
      if (exists) {
        musicifyData.favorites = musicifyData.favorites.filter(t => t.id !== rec.id);
      } else {
        musicifyData.favorites.push({
          id: rec.id,
          title: rec.title,
          artist: rec['artist-credit']?.map(a => a.name).join(', '),
          releases: rec.releases
        });
      }
      saveData();
    }

    // --- NEW: Playlists ---
    function addToPlaylist(rec) {
      const name = prompt("Enter playlist name:");
      if (!name) return;
      if (!musicifyData.playlists[name]) musicifyData.playlists[name] = [];
      musicifyData.playlists[name].push(rec);
      saveData();
    }

    // --- NEW: Views ---
    function showHome() {
      sectionTitle.textContent = "Search Results";
      resultsEl.innerHTML = "<p>Type something in the search bar.</p>";
    }

    function showFavorites() {
      sectionTitle.textContent = "‚ù§Ô∏è Favorites";
      renderResults(musicifyData.favorites);
    }

    function showHistory() {
      sectionTitle.textContent = "‚è±Ô∏è History";
      renderResults(musicifyData.history);
    }

    function showPlaylists() {
      sectionTitle.textContent = "üé∂ Playlists";
      resultsEl.innerHTML = '';
      for (let [name, tracks] of Object.entries(musicifyData.playlists)) {
        const h3 = document.createElement('h3');
        h3.textContent = name;
        resultsEl.appendChild(h3);
        renderResults(tracks);
      }
    }

    // --- Modified PlayTrack to save history ---
    async function playTrack(index, list = searchResults) {
      const rec = list[index];
      if (!rec) return;
      const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown';
      const imgUrl = rec.releases?.[0]?.id ? `https://coverartarchive.org/release/${rec.releases[0].id}/front-250` : placeholder();

      // save to history (no duplicates)
      musicifyData.history = musicifyData.history.filter(t => t.id !== rec.id);
      musicifyData.history.unshift({ id: rec.id, title: rec.title, artist: artists, releases: rec.releases });
      if (musicifyData.history.length > 50) musicifyData.history.pop();
      saveData();

      async function playTrack(index, list = searchResults) {
  currentList = list;
  currentIndex = index;
  const rec = list[index];
  if (!rec) return;
  const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown';

  // Update player UI
  document.getElementById('player-title').textContent = rec.title;
  document.getElementById('player-artist').textContent = artists;
  const releaseId = rec.releases?.[0]?.id;
  document.getElementById('player-cover').src = releaseId 
    ? `https://coverartarchive.org/release/${releaseId}/front-250` 
    : placeholder();

  // Save to history
  musicifyData.history = musicifyData.history.filter(t => t.id !== rec.id);
  musicifyData.history.unshift(rec);
  if (musicifyData.history.length > 50) musicifyData.history.pop();
  saveData();

  // Find YouTube video
  const q = encodeURIComponent(`${rec.title} ${artists}`);
  const resp = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${q}&key=${YOUTUBE_API_KEY}&maxResults=1`);
  const data = await resp.json();
  if (data.items.length) {
    const videoId = data.items[0].id.videoId;
    if (!player) {
      player = new YT.Player('yt-player', {
        height: '0',
        width: '0',
        videoId: videoId,
        playerVars: { 'autoplay': 1 },
        events: {
          'onReady': () => { isPlaying = true; },
          'onStateChange': (e) => {
            if (e.data === YT.PlayerState.ENDED) nextTrack();
          }
        }
      });
    } else {
      player.loadVideoById(videoId);
      isPlaying = true;
    }
    document.getElementById('play-btn').textContent = '‚è∏Ô∏è';
  }
}


    // ... (rest of your existing JS code unchanged)
    / Initialize YouTube Player function initYouTubePlayer() { const tag = document.createElement('script'); tag.src = "https://www.youtube.com/iframe_api"; const firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); } // Called when YouTube API is ready function onYouTubeIframeAPIReady() { player = new YT.Player('yt-frame', { events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange } }); } function onPlayerReady(event) { console.log('YouTube player is ready'); // Enable player controls now that player is ready document.querySelectorAll('.player-button').forEach(btn => { btn.disabled = false; }); } function onPlayerStateChange(event) { switch(event.data) { case YT.PlayerState.PLAYING: isPlaying = true; updatePlayButton(); startProgressTimer(); break; case YT.PlayerState.PAUSED: isPlaying = false; updatePlayButton(); clearInterval(updateInterval); break; case YT.PlayerState.ENDED: isPlaying = false; updatePlayButton(); clearInterval(updateInterval); if (isRepeated) { player.seekTo(0); player.playVideo(); } else { playNextTrack(); } break; } } // Search music when typing let searchTimeout; queryInput.addEventListener('input', (e) => { clearTimeout(searchTimeout); const q = e.target.value.trim(); if (!q) { resultsEl.innerHTML = ''; statusBox.textContent = ''; return; } statusBox.textContent = 'Searching...'; searchTimeout = setTimeout(() => searchMusic(q), 500); }); // Search MusicBrainz API async function searchMusic(q) { try { const url = https://musicbrainz.org/ws/2/recording?query=${encodeURIComponent(q)}&fmt=json&limit=12&inc=releases+artist-credits; const res = await fetch(url, { headers: { 'User-Agent': 'music-search-spotify/1.0 (example@example.com)' } }); const data = await res.json(); searchResults = Array.isArray(data.recordings) ? data.recordings : []; if (searchResults.length === 0) { statusBox.textContent = 'No results found. Try a different search.'; resultsEl.innerHTML = ''; return; } statusBox.textContent = ''; renderResults(searchResults); } catch (err) { console.error(err); statusBox.textContent = 'Failed to search. Check your network.'; } } // Render search results function renderResults(items) { resultsEl.innerHTML = ''; items.forEach((rec, index) => { const card = document.createElement('div'); card.className = 'card'; const img = document.createElement('img'); img.className = 'card-img'; const releaseId = rec.releases?.[0]?.id; if (releaseId) { img.src = https://coverartarchive.org/release/${releaseId}/front-250; img.alt = ${rec.title} cover; img.onerror = () => { img.src = placeholder(); }; } else { img.src = placeholder(); img.alt = 'No cover available'; } const title = document.createElement('div'); title.className = 'card-title'; title.textContent = rec.title || 'Untitled'; const subtitle = document.createElement('div'); subtitle.className = 'card-subtitle'; const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown artist'; const releaseDate = rec['first-release-date'] || 'Unknown year'; subtitle.textContent = ${artists} ‚Ä¢ ${releaseDate}; const playBtn = document.createElement('div'); playBtn.className = 'card-play'; playBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg>'; playBtn.addEventListener('click', (e) => { e.stopPropagation(); playTrack(index); }); card.appendChild(img); card.appendChild(title); card.appendChild(subtitle); card.appendChild(playBtn); card.addEventListener('click', () => playTrack(index)); resultsEl.appendChild(card); }); } // Play track by index async function playTrack(index) { if (!searchResults[index]) return; const rec = searchResults[index]; const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown artist'; const imgUrl = rec.releases?.[0]?.id ? https://coverartarchive.org/release/${rec.releases[0].id}/front-250 : placeholder(); currentTrackIndex = index; currentTrack = { title: rec.title || 'Untitled', artist: artists, imgUrl }; // Update player UI playerTitle.textContent = currentTrack.title; playerArtist.textContent = currentTrack.artist; playerImg.src = currentTrack.imgUrl; playerEl.style.display = 'grid'; try { const q = ${currentTrack.title} ${currentTrack.artist}.trim(); const videoId = await searchYouTubeVideo(q); if (!videoId) { alert('No YouTube video found for this track'); return; } if (player && typeof player.loadVideoById === 'function') { player.loadVideoById(videoId); player.playVideo(); } else { // Fallback if player isn't ready yet document.getElementById('yt-frame').src = https://www.youtube.com/embed/${videoId}?autoplay=1&enablejsapi=1; } } catch (err) { console.error('Error playing track:', err); alert('Failed to load video'); } } // Search YouTube for video async function searchYouTubeVideo(q) { if (!YOUTUBE_API_KEY || YOUTUBE_API_KEY.includes('YOUR_')) { alert('Please set your YouTube API key'); return null; } const endpoint = new URL('https://www.googleapis.com/youtube/v3/search'); endpoint.searchParams.set('part', 'snippet'); endpoint.searchParams.set('type', 'video'); endpoint.searchParams.set('maxResults', '1'); endpoint.searchParams.set('q', q); endpoint.searchParams.set('key', YOUTUBE_API_KEY); const res = await fetch(endpoint.toString()); const data = await res.json(); return data.items?.[0]?.id?.videoId || null; } // Player controls function togglePlay() { if (!player) return; if (isPlaying) { player.pauseVideo(); } else { player.playVideo(); } } function playNextTrack() { if (searchResults.length === 0) return; let nextIndex; if (isShuffled) { nextIndex = Math.floor(Math.random() * searchResults.length); } else { nextIndex = (currentTrackIndex + 1) % searchResults.length; } playTrack(nextIndex); } function playPrevTrack() { if (searchResults.length === 0) return; let prevIndex; if (isShuffled) { prevIndex = Math.floor(Math.random() * searchResults.length); } else { prevIndex = (currentTrackIndex - 1 + searchResults.length) % searchResults.length; } playTrack(prevIndex); } function toggleShuffle() { isShuffled = !isShuffled; shuffleBtn.classList.toggle('active', isShuffled); } function toggleRepeat() { isRepeated = !isRepeated; repeatBtn.classList.toggle('active', isRepeated); } function updatePlayButton() { if (isPlaying) { playBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3 3h3v10H3zm7 0h3v10h-3z"></path></svg>'; } else { playBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg>'; } } function startProgressTimer() { clearInterval(updateInterval); updateProgress(); updateInterval = setInterval(updateProgress, 1000); } function updateProgress() { if (!player) return; const currentTime = player.getCurrentTime(); const duration = player.getDuration(); if (duration && currentTime) { const progressPercent = (currentTime / duration) * 100; progress.style.width = ${progressPercent}%; progressHandle.style.left = ${progressPercent}%; currentTimeEl.textContent = formatTime(currentTime); durationEl.textContent = formatTime(duration); } } function seekToPosition(e) { if (!player) return; const rect = progressBar.getBoundingClientRect(); const pos = Math.min(Math.max(0, (e.clientX - rect.left) / rect.width), 1); player.seekTo(player.getDuration() * pos); } function formatTime(seconds) { const mins = Math.floor(seconds / 60); const secs = Math.floor(seconds % 60); return ${mins}:${secs < 10 ? '0' : ''}${secs}; } // Event listeners playBtn.addEventListener('click', togglePlay); prevBtn.addEventListener('click', playPrevTrack); nextBtn.addEventListener('click', playNextTrack); shuffleBtn.addEventListener('click', toggleShuffle); repeatBtn.addEventListener('click', toggleRepeat); progressBar.addEventListener('click', seekToPosition); progressBar.addEventListener('mousemove', (e) => { if (!player) return; const rect = progressBar.getBoundingClientRect(); const pos = Math.min(Math.max(0, (e.clientX - rect.left) / rect.width), 1); progressHandle.style.left = ${pos * 100}%; }); // Disable buttons until player is ready document.querySelectorAll('.player-button').forEach(btn => { btn.disabled = true; }); // Placeholder image function placeholder() { return 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='; } // Initialize the app initYouTubePlayer();

  </script>
</body>
</html>
