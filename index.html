<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸŽµ Music Search - Spotify Style</title>
  <style>
    :root {
      --bg: #121212;
      --card-bg: #181818;
      --card-hover: #282828;
      --text: #ffffff;
      --text-muted: #b3b3b3;
      --brand: #1db954;
      --brand-hover: #1ed760;
      --sidebar: #000000;
      --player-bg: #181818;
      --progress-bar: #535353;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Circular', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: 1fr auto;
      grid-template-areas: 
        "sidebar main"
        "player player";
    }
    
    /* Sidebar */
    .sidebar {
      grid-area: sidebar;
      background: var(--sidebar);
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    
    .logo {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 16px;
    }
    
    .nav-item {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 0;
      transition: color 0.2s ease;
    }
    
    .nav-item:hover {
      color: var(--text);
    }
    
    /* Main Content */
    .main {
      grid-area: main;
      padding: 24px;
      overflow-y: auto;
    }
    
    .searchbar {
      margin-bottom: 24px;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 16px;
      border-radius: 500px;
      border: none;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
      font-size: 14px;
      outline: none;
    }
    
    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    
    .search-input:focus {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .section-title {
      font-size: 24px;
      margin: 24px 0 16px;
    }
    
    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 24px;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 16px;
      transition: background-color 0.3s ease;
      cursor: pointer;
      position: relative;
    }
    
    .card:hover {
      background: var(--card-hover);
    }
    
    .card-play {
      position: absolute;
      bottom: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      background: var(--brand);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: all 0.3s ease;
      transform: translateY(8px);
      box-shadow: 0 8px 8px rgba(0, 0, 0, 0.3);
    }
    
    .card:hover .card-play {
      opacity: 1;
      transform: translateY(0);
    }
    
    .card-play:hover {
      background: var(--brand-hover);
      transform: scale(1.05);
    }
    
    .card-img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
    }
    
    .card-title {
      font-weight: 700;
      margin-bottom: 8px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .card-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    /* Player */
    .player {
      grid-area: player;
      background: var(--player-bg);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding: 16px;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      align-items: center;
    }
    
    .player-track {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .player-track-img {
      width: 56px;
      height: 56px;
      object-fit: cover;
    }
    
    .player-track-info {
      display: flex;
      flex-direction: column;
    }
    
    .player-track-title {
      font-size: 14px;
      font-weight: 600;
    }
    
    .player-track-artist {
      font-size: 12px;
      color: var(--text-muted);
    }
    
    .player-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .player-buttons {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .player-button {
      background: none;
      border: none;
      color: var(--text);
      font-size: 16px;
      cursor: pointer;
    }
    
    .player-button-play {
      background: var(--text);
      color: #000;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .player-progress {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .player-time {
      font-size: 11px;
      color: var(--text-muted);
      min-width: 40px;
    }
    
    .player-bar {
      flex-grow: 1;
      height: 4px;
      background: var(--progress-bar);
      border-radius: 2px;
      position: relative;
      cursor: pointer;
    }
    
    .player-progress-bar {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      background: var(--text-muted);
      border-radius: 2px;
      width: 30%;
    }
    
    .player-actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 12px;
    }
    
    /* Status */
    .status {
      color: var(--text-muted);
      font-size: 14px;
      margin: 16px 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      body {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "main"
          "player";
      }
      
      .sidebar {
        display: none;
      }
      
      .results-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="logo">Musicify</div>
    <a href="#" class="nav-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5z"></path></svg>
      <span>Home</span>
    </a>
    <a href="#" class="nav-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg>
      <span>Search</span>
    </a>
    <a href="#" class="nav-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5z"></path></svg>
      <span>Your Library</span>
    </a>
  </div>

  <div class="main">
    <div class="searchbar">
      <input type="text" class="search-input" placeholder="What do you want to listen to?" id="query">
    </div>
    
    <div id="status" class="status"></div>
    
    <h2 class="section-title">Search Results</h2>
    <div id="results" class="results-grid"></div>
  </div>

  <div class="player" id="player" style="display: none;">
    <div class="player-track">
      <img class="player-track-img" id="player-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==">
      <div class="player-track-info">
        <div class="player-track-title" id="player-title">Not Playing</div>
        <div class="player-track-artist" id="player-artist">Search for music</div>
      </div>
    </div>
    
    <div class="player-controls">
      <div class="player-buttons">
        <button class="player-button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M13 2.5L5 7.119V3H3v10h2V8.881l8 4.619z"></path></svg>
        </button>
        <button class="player-button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3 3h3v10H3zm7 0h3v10h-3z"></path></svg>
        </button>
        <button class="player-button player-button-play">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg>
        </button>
        <button class="player-button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M12.7 1a.7.7 0 0 0-.7.7v5.15L2.05 1.107A.7.7 0 0 0 1 1.712v12.575a.7.7 0 0 0 1.05.607L12 9.149V14.3a.7.7 0 0 0 .7.7h1.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-1.6z"></path></svg>
        </button>
      </div>
      <div class="player-progress">
        <span class="player-time">0:00</span>
        <div class="player-bar">
          <div class="player-progress-bar"></div>
        </div>
        <span class="player-time">3:30</span>
      </div>
    </div>
    
    <div class="player-actions">
      <button class="player-button">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M15.25 8a.75.75 0 0 1-.75.75H8.75v5.75a.75.75 0 0 1-1.5 0V8.75H1.5a.75.75 0 0 1 0-1.5h5.75V1.5a.75.75 0 0 1 1.5 0v5.75h5.75a.75.75 0 0 1 .75.75z"></path></svg>
      </button>
    </div>
  </div>

  <script>
    const YOUTUBE_API_KEY = "AIzaSyAcDpY-ztAhtUQmxzmjaPeCWum9ciznHTs"; // replace with your key

    const queryInput = document.getElementById('query');
    const statusBox = document.getElementById('status');
    const resultsEl = document.getElementById('results');
    const playerEl = document.getElementById('player');
    const playerImg = document.getElementById('player-img');
    const playerTitle = document.getElementById('player-title');
    const playerArtist = document.getElementById('player-artist');

    // Debounce search input
    let searchTimeout;
    queryInput.addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      const q = e.target.value.trim();
      if (!q) {
        resultsEl.innerHTML = '';
        statusBox.textContent = '';
        return;
      }
      
      statusBox.textContent = 'Searching...';
      searchTimeout = setTimeout(() => searchMusic(q), 500);
    });

    async function searchMusic(q) {
      try {
        const url = `https://musicbrainz.org/ws/2/recording?query=${encodeURIComponent(q)}&fmt=json&limit=12&inc=releases+artist-credits`;
        const res = await fetch(url, { 
          headers: { 'User-Agent': 'music-search-spotify/1.0 (example@example.com)' } 
        });
        const data = await res.json();
        const recordings = Array.isArray(data.recordings) ? data.recordings : [];
        
        if (recordings.length === 0) {
          statusBox.textContent = 'No results found. Try a different search.';
          resultsEl.innerHTML = '';
          return;
        }
        
        statusBox.textContent = '';
        renderResults(recordings);
      } catch (err) {
        console.error(err);
        statusBox.textContent = 'Failed to search. Check your network.';
      }
    }

    function renderResults(items) {
      resultsEl.innerHTML = '';
      items.forEach(rec => {
        const card = document.createElement('div');
        card.className = 'card';
        
        const img = document.createElement('img');
        img.className = 'card-img';
        const releaseId = rec.releases?.[0]?.id;
        if (releaseId) {
          img.src = `https://coverartarchive.org/release/${releaseId}/front-250`;
          img.alt = `${rec.title} cover`;
          img.onerror = () => { img.src = placeholder(); };
        } else {
          img.src = placeholder();
          img.alt = 'No cover available';
        }
        
        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = rec.title || 'Untitled';
        
        const subtitle = document.createElement('div');
        subtitle.className = 'card-subtitle';
        const artists = rec['artist-credit']?.map(a => a.name).join(', ') || 'Unknown artist';
        const releaseDate = rec['first-release-date'] || 'Unknown year';
        subtitle.textContent = `${artists} â€¢ ${releaseDate}`;
        
        const playBtn = document.createElement('div');
        playBtn.className = 'card-play';
        playBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.018 14L14.41 8 4.018 2z"></path></svg>';
        playBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          playTrack(rec.title, artists, img.src);
        });
        
        card.appendChild(img);
        card.appendChild(title);
        card.appendChild(subtitle);
        card.appendChild(playBtn);
        
        card.addEventListener('click', () => playTrack(rec.title, artists, img.src));
        
        resultsEl.appendChild(card);
      });
    }

    function placeholder() {
      return 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';
    }

    async function playTrack(title, artist, imgUrl) {
      if (!YOUTUBE_API_KEY || YOUTUBE_API_KEY.includes('YOUR_')) {
        alert('Please set your YouTube API key');
        return;
      }
      
      playerTitle.textContent = title;
      playerArtist.textContent = artist;
      playerImg.src = imgUrl;
      playerEl.style.display = 'grid';
      
      try {
        const q = `${title} ${artist}`.trim();
        const endpoint = new URL('https://www.googleapis.com/youtube/v3/search');
        endpoint.searchParams.set('part', 'snippet');
        endpoint.searchParams.set('type', 'video');
        endpoint.searchParams.set('maxResults', '1');
        endpoint.searchParams.set('q', q);
        endpoint.searchParams.set('key', YOUTUBE_API_KEY);

        const res = await fetch(endpoint.toString());
        const data = await res.json();
        
        if (!data.items?.[0]?.id?.videoId) {
          alert('No YouTube video found for this track');
          return;
        }
        
        // In a real app, you would play the video here
        // This is just a UI demo so we don't actually play the video
        console.log('Would play YouTube video:', data.items[0].id.videoId);
      } catch (err) {
        console.error('YouTube API error', err);
        alert('Failed to load video');
      }
    }
  </script>
</body>
</html>
